<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: "cdpath" searching, and pushd/popd too -->
<!--X-From-R13: unapurNnzf.fhalfo.rqh (Vnenyq Vnapur&#45;Ayfra) -->
<!--X-Date: Tue, 25 May 1993 13:10:07 &#45;0400 -->
<!--X-Message-Id: 9305251710.AA23495@ams.sunysb.edu -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: m0ny1zY&#45;00055zC@talisker.ohm.york.ac.uk -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: &quot;cdpath&quot; searching, and pushd/popd too</title>
<link rev="made" href="mailto:hanche@ams.sunysb.edu">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00509.html">Date Prev</a>][<a href="msg00511.html">Date Next</a>][<a href="msg00504.html">Thread Prev</a>][<a href="msg00513.html">Thread Next</a>][<a href="maillist.html#00510">Date Index</a>][<a href="threads.html#00510">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: &quot;cdpath&quot; searching, and pushd/popd too</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:es%40hawkwind.utcs.toronto.edu">es@hawkwind.utcs.toronto.edu</a></li>
<li><em>Subject</em>: Re: &quot;cdpath&quot; searching, and pushd/popd too</li>
<li><em>From</em>: <a href="mailto:hanche%40ams.sunysb.edu">hanche@ams.sunysb.edu</a> (Harald Hanche-Olsen)</li>
<li><em>Date</em>: Tue, 25 May 1993 13:10:06 -0400</li>
<li><em>In-reply-to</em>: &lt;<a href="msg00504.html">m0ny1zY-00055zC@talisker.ohm.york.ac.uk</a>&gt; (rog@ohm.york.ac.uk)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>I have never used cdpath, and I second the motion to remove it from
initial.es.  I can see how people can get addicted to it though, so
putting the code to do so in an interactive.es file is probably a good
idea.

Myself, I have become addicted to pushd and popd, but I will not
suggest adding them to es.  Indeed I find them somewhat painful to
use, even though I use them frequently:  Getting back to a particular
directory requires a `dirs' followed by careful counting to figure out
which number to give to `pushd'.

So I went ahead and implemented a two-argument cd:  If I cd out of a
directory and suspect I may want to get back there some time, I give
an optional second argument to cd.  Then I give that name to cd to get
back there.  The default second arg is `-', so `cd -' acts like many
people's `back'.

Here is my implementation of the thing.

fn-%pwd = &lt;={%whatis pwd}
wd = `` \n %pwd
fn-pwd = {echo $wd}
fn cd to name {
  if {~ $#to 0} \
    {to=$home
     if {!~ $#home 1} {throw error $0 '$home must have one component only'}}
  if {~ $#name 0} {name=-}
  if {!~ $#name 1} {throw error $0 'Usage: cd [dir [return-name]]'}
  if {!~ $#(dir-$to) 0} {to=$(dir-$to); echo cd $to &gt;[1=2]}
  $&amp;cd $to
  dir-$name=$wd
  wd=`` \n {%pwd}
  $%cd-hook}

Sample session:

; cd /etc
; cd -
cd /export/home/hanche
; cd -
cd /etc
; cd /usr etc
; pwd
/usr
; cd etc
cd /etc
; cd -
cd /usr
; cd ./etc
; pwd
/usr/etc

This is still experimental, but I would like to know what others think
of the idea and what other solutions to the same problem people have
come up with.

Oh, there is one problem with this, as well as with the classical
pushd/popd, and with back to:  We have a system where lots of file
system are NFS mounted using the automounter.  Now trying to cd back
to a directory that I didn't visit for a while can easily fail, as I
haven't save the version of the path that will trigger the automounter
to remount the volume.  Any good solutions for that one?

- Harald 

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00504" href="msg00504.html">Re: &quot;cdpath&quot; searching</a></strong>
<ul><li><em>From:</em> &quot;Roger Peppe&quot; &lt;rog@ohm.york.ac.uk&gt;</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00509.html">Re: everyone's least favorite creatures</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00511.html">Re:  creature = `feep</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00504.html">Re: &quot;cdpath&quot; searching</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00513.html">Re: &quot;cdpath&quot; searching, and pushd/popd too</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00510"><strong>Date</strong></a></li>
<li><a href="threads.html#00510"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>
