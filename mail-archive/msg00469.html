<!-- MHonArc v2.6.18 -->
<!--X-Subject: X selections (was Re: ile, once again) -->
<!--X-From-R13: Epbgg Epujnegm <fpujnegmNtebhpub.pf.cfh.rqh> -->
<!--X-Date: Fri, 21 May 1993 20:38:16 &#45;0400 -->
<!--X-Message-Id: 93May21.203645edt.2537@groucho.cs.psu.edu -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 9305212143.AA16214@ams.sunysb.edu -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>X selections (was Re: ile, once again)</title>
<link rev="made" href="mailto:schwartz@groucho.cs.psu.edu">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00468.html">Date Prev</a>][<a href="msg00470.html">Date Next</a>][<a href="msg00468.html">Thread Prev</a>][<a href="msg00470.html">Thread Next</a>][<a href="maillist.html#00469">Date Index</a>][<a href="threads.html#00469">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>X selections (was Re: ile, once again)</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:hanche%40ams.sunysb.edu">hanche@ams.sunysb.edu</a> (Harald Hanche-Olsen)</li>
<li><em>Subject</em>: X selections (was Re: ile, once again)</li>
<li><em>From</em>: Scott Schwartz &lt;<a href="mailto:schwartz%40groucho.cs.psu.edu">schwartz@groucho.cs.psu.edu</a>&gt;</li>
<li><em>Date</em>: Fri, 21 May 1993 20:37:50 -0400</li>
<li><em>Cc</em>: <a href="mailto:es%40hawkwind.utcs.toronto.edu">es@hawkwind.utcs.toronto.edu</a></li>
<li><em>In-reply-to</em>: Your message of &quot;Fri, 21 May 1993 17:43:12 EDT.&quot;             &lt;<a href="msg00468.html">9305212143.AA16214@ams.sunysb.edu</a>&gt; </li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>
| But I do have a nice workaround:  We have here a nice little program
| called xcb that will, among various other things, print the contents
| of the X cut buffer on stdout.  

Speaking of that, the problem with cut buffers is that they store the
cut text inside the server.  If you use the clipboard, or some other
selection, the cut data is stored in the client, usually not even
copied anywhere until someone asks for it.  Now if only there was a
client that did for selections what xcb does for cut buffers...  Well
in leu of that, here's a really gross hack to xcutsel that lets you
noninteractively snarf an X selection and write it to stdout.  It reads
PRIMARY by default, but if you call it as ``xcut -s CLIPBOARD'' it will
read that instead.

*** X11R5/mit/clients/xclipboard/xcutsel.c	Sun Feb 17 12:05:42 1991
--- xsel.c	Sun May  2 21:00:11 1993
***************
*** 1,3 ****
--- 1,5 ----
+ /* xsel.c -- hacked from xcutsel.c */
+ 
  /*
   * $XConsortium: xcutsel.c,v 1.15 91/02/17 12:05:27 dave Exp $
   *
***************
*** 81,86 ****
--- 83,99 ----
  }
  
  
+ /* ARGSUSED */
+ static void Quit(w, closure, callData)
+     Widget w;
+     XtPointer closure;		/* unused */
+     XtPointer callData;		/* unused */
+ {
+     XtCloseDisplay( XtDisplay(w) );
+     exit(0);
+ }
+ 
+ 
  static void StoreBuffer(w, client_data, selection, type, value, length, format)
      Widget w;
      XtPointer client_data;
***************
*** 91,100 ****
--- 104,117 ----
  {
  
      if (*type == 0 || *type == XT_CONVERT_FAIL || *length == 0) {
+ Quit(w, 0, 0);
  	XBell( XtDisplay(w), 0 );
  	return;
      }
  
+ printf(&quot;%*s\n&quot;, (int)*length, (char*)value);
+ Quit(w, 0, 0);
+ 
      XStoreBuffer( XtDisplay(w), (char*)value, (int)(*length),
  		  options.buffer );
     
***************
*** 211,227 ****
  
  
  /* ARGSUSED */
- static void Quit(w, closure, callData)
-     Widget w;
-     XtPointer closure;		/* unused */
-     XtPointer callData;		/* unused */
- {
-     XtCloseDisplay( XtDisplay(w) );
-     exit(0);
- }
- 
- 
- /* ARGSUSED */
  static void GetSelection(w, closure, callData)
      Widget w;
      XtPointer closure;		/* unused */
--- 228,233 ----
***************
*** 300,305 ****
--- 306,313 ----
   	state.button = button;
  	state.is_on = False;
     
+ XtSetMappedWhenManaged(shell, False);
      XtRealizeWidget(shell);
+ GetSelection(shell, 0, 0);
      XtAppMainLoop(appcon);
  }

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00470" href="msg00470.html">Re: X selections (was Re: ile, once again)</a></strong>
<ul><li><em>From:</em> Calvin Clark &lt;ckclark@MIT.EDU&gt;</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00468" href="msg00468.html">ile, once again</a></strong>
<ul><li><em>From:</em> hanche@ams.sunysb.edu (Harald Hanche-Olsen)</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00468.html">ile, once again</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00470.html">Re: X selections (was Re: ile, once again)</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00468.html">ile, once again</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00470.html">Re: X selections (was Re: ile, once again)</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00469"><strong>Date</strong></a></li>
<li><a href="threads.html#00469"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>
