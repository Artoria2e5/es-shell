<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: es memory requirements -->
<!--X-From-R13: Rbaa Qnir <qbaaNh.jnfuvatgba.rqh> -->
<!--X-Date: Tue, 5 Jan 1993 19:24:58 &#45;0500 -->
<!--X-Message-Id: 9301060024.AA06930@carson.u.washington.edu -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: es memory requirements</title>
<link rev="made" href="mailto:donn@u.washington.edu">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00180.html">Date Prev</a>][<a href="msg00182.html">Date Next</a>][<a href="msg00180.html">Thread Prev</a>][<a href="msg00182.html">Thread Next</a>][<a href="maillist.html#00181">Date Index</a>][<a href="threads.html#00181">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: es memory requirements</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:haahr%40mv.us.adobe.com">haahr@mv.us.adobe.com</a></li>
<li><em>Subject</em>: Re: es memory requirements</li>
<li><em>From</em>: Donn Cave &lt;<a href="mailto:donn%40u.washington.edu">donn@u.washington.edu</a>&gt;</li>
<li><em>Date</em>: Tue, 5 Jan 1993 19:24:45 -0500</li>
<li><em>Cc</em>: <a href="mailto:es%40hawkwind.utcs.toronto.edu">es@hawkwind.utcs.toronto.edu</a></li>
<li><em>Sender</em>: <a href="mailto:donn%40carson.u.washington.edu">donn@carson.u.washington.edu</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Date: 	Tue, 5 Jan 1993 18:25:19 -0500
From: Paul Haahr &lt;haahr@mv.us.adobe.com&gt;
Subject: Re: es memory requirements

|&gt; When would you expect &quot;the next time a collection is done&quot; to happen?  I'm
|&gt; thinking perhaps, if I could induce a collection at certain points, things
|&gt; might improve.
|
| that's pretty easy.  we'll probably introduce a $&amp;collect primitive which  
| calls the collector and returns.  (if you want to hand carve one, just call  
| the function gc() from the primitive and return true.  that should be  
| sufficient.)

OK, that was easy.  Results weren't exactly what I expected, though -

;; ps -Fp $pid
     UID   PID  PPID  C       SZ     RSS ENG    STIME TTY         TIME COMMAND
    root 24449 17947  0      296     156     16:01:22 ttyAF/ADFE  0:00 ./es
;; collect
;; ps -Fp $pid
     UID   PID  PPID  C       SZ     RSS ENG    STIME TTY         TIME COMMAND
    root 24449 17947  6      368     208     16:01:22 ttyAF/ADFE  0:00 ./es
;; collect
;; ps -Fp $pid
     UID   PID  PPID  C       SZ     RSS ENG    STIME TTY         TIME COMMAND
    root 24449 17947 10      512     280     16:01:22 ttyAF/ADFE  0:00 ./es
;; collect
;; ps -Fp $pid
     UID   PID  PPID  C       SZ     RSS ENG    STIME TTY         TIME COMMAND
    root 24449 17947 13      512     280     16:01:22 ttyAF/ADFE  0:00 ./es

In short, the first two &quot;collects&quot; increase SZ (total size) and RSS (resident
set size), after which there's no effect.  That was after allocating a few
functions and lists - not a very systematic test, and with the starting
point (156/296) at the relatively modest size we see when we start the program
up, so I can't say for sure what it would do to my application - but I'm not
sure it's worth bothering with.

Incidentally, we did some tuning this morning, and while it helped streamline
virtual memory use overall, es was reportedly immune to the tuning.  That is,
of that memory it allocates, we were unable to get any to page out.  Probably
not surprising - it seems obvious that an interpreter like this, without
any particularly specialized faculties, would tend to always be doing all
of the things it does, and not ignoring any large region of its address
space.

	Donn Cave, University Computing Services, University of Washington
	donn@cac.washington.edu

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00180.html">Re: es memory requirements</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00182.html">Release 0.74 of es</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00180.html">Re: es memory requirements</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00182.html">Release 0.74 of es</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00181"><strong>Date</strong></a></li>
<li><a href="threads.html#00181"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>
