<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: settor functions -->
<!--X-From-R13: Epbgg Epujnegm <fpujnegmNtebhpub.pf.cfh.rqh> -->
<!--X-Date: Sun, 4 Oct 1992 23:21:38 &#45;0400 -->
<!--X-Message-Id: 92Oct4.232058edt.2620@groucho.cs.psu.edu -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 9210041624.AA07493@utopia.mv.us.adobe.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: settor functions</title>
<link rev="made" href="mailto:schwartz@groucho.cs.psu.edu">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00029.html">Date Prev</a>][<a href="msg00031.html">Date Next</a>][<a href="msg00029.html">Thread Prev</a>][<a href="msg00031.html">Thread Next</a>][<a href="maillist.html#00030">Date Index</a>][<a href="threads.html#00030">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: settor functions</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: Paul Haahr &lt;<a href="mailto:haahr%40mv.us.adobe.com">haahr@mv.us.adobe.com</a>&gt;</li>
<li><em>Subject</em>: Re: settor functions</li>
<li><em>From</em>: Scott Schwartz &lt;<a href="mailto:schwartz%40groucho.cs.psu.edu">schwartz@groucho.cs.psu.edu</a>&gt;</li>
<li><em>Date</em>: Sun, 4 Oct 1992 23:20:47 -0400</li>
<li><em>Cc</em>: <a href="mailto:es%40hawkwind.utcs.toronto.edu">es@hawkwind.utcs.toronto.edu</a>, <a href="mailto:john%40civil.su.oz.au">john@civil.su.oz.au</a></li>
<li><em>In-reply-to</em>: Your message of &quot;Sun, 04 Oct 92 12:24:47 EDT.&quot;             &lt;<a href="msg00029.html">9210041624.AA07493@utopia.mv.us.adobe.com</a>&gt; </li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>
| the uncaught exception is because {} are not considered functions.
| maybe they should be.  

Can you precisely state the semantics for {}?  At first I thought that
{ foo } might be equivalent to @ { foo }, but it isn't.

Another question is, what does &quot;return&quot; mean.  In es it means two
things, a control flow construct and a value returning construct.  In
scheme those concepts are separate.  Every expression evaluates to
some value, and you return a value just by falling off the end,
without any additional control flow constructs.  (Perl works the same
way, as it happens.)  In a shell like es this is a little stickier,
since you execute everything in sight, including literals, which perl
and scheme don't do.

| to support return from {}, but the reason i don't want {} to
| catch return is that then

Ah, but now we see that it is &quot;return&quot; that is misbehaving.  When you
write &quot;return&quot; in function foo, you really want it to mean is
&quot;call-escape-continuation-for-function-foo&quot;, which you can easily
generate code for since you know what function you are in, or you can
pass that continuation as a paramter (probably fluid-let is better for
that, though) so that return would be syntactic sugar for calling it.
This is assuming you add all this scheme stuff to the language, but it
fixes the problem in a clean way.

| 	fn foo {
| 		local (orig = $*) {
| 			while {!~ $#* 0} {
| 				if {~ $1 --} {
| 					return $*(2 ...)
| 				}
| 				* = $*(2 ...)
| 			}
| 			return $orig
| 		}
| 	}

But suppose you wrote:

	fn borg { while {sleep 1} $1 }
	fn alert { echo 'unix is futile'; return; }

Then typed this:

	borg alert

As expected, the inner return doesn't exit from the loop.  Similary,
for this:

	borg @ { echo 'software is irrelevent'; return; } 

But the following is magic, and exits after one iteration:

	borg { echo 'new operating system Deep-Space-9'; return; } 

| anyway, that's the argument, and it convinces me, but it does seem
| asymmetric, and that causes concern.

Orthogonality is key.  Lambda is irresistable.  You will be assimilated. :-)

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00029" href="msg00029.html">Re: settor functions</a></strong>
<ul><li><em>From:</em> Paul Haahr &lt;haahr@mv.us.adobe.com&gt;</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00029.html">Re: settor functions</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00031.html">Re: settor functions</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00029.html">Re: settor functions</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00031.html">Re: settor functions</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00030"><strong>Date</strong></a></li>
<li><a href="threads.html#00030"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>
