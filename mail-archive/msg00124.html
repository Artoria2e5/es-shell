<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: protecting shell fds -->
<!--X-From-R13: Bnhy Vnnue <unnueNzi.hf.nqbor.pbz> -->
<!--X-Date: Wed, 21 Oct 1992 17:20:58 &#45;0400 -->
<!--X-Message-Id: 9210212119.AA10610@utopia.mv.us.adobe.com -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: protecting shell fds</title>
<link rev="made" href="mailto:haahr@mv.us.adobe.com">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00123.html">Date Prev</a>][<a href="msg00125.html">Date Next</a>][<a href="msg00123.html">Thread Prev</a>][<a href="msg00129.html">Thread Next</a>][<a href="maillist.html#00124">Date Index</a>][<a href="threads.html#00124">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: protecting shell fds</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: Donn Cave &lt;<a href="mailto:donn%40u.washington.edu">donn@u.washington.edu</a>&gt;</li>
<li><em>Subject</em>: Re: protecting shell fds</li>
<li><em>From</em>: Paul Haahr &lt;<a href="mailto:haahr%40mv.us.adobe.com">haahr@mv.us.adobe.com</a>&gt;</li>
<li><em>Date</em>: Wed, 21 Oct 1992 17:19:10 -0400</li>
<li><em>Cc</em>: es mailing list &lt;<a href="mailto:es%40hawkwind.utcs.toronto.edu">es@hawkwind.utcs.toronto.edu</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Donn, thank you for writing your detailed explaination.  your example is, while  
probably rare, real, and i'm beginning to realize that i can't find a case where  
the current behavior makes more sense.  also, one key phrase in your note  
sounded the death knell for the present implementation:

&gt; To recap my prior arguments on this, my feeling is that once the shell has
&gt; begun reading a stream of commands, that command stream should be invulnerable
&gt; to redirection from shell statements.

which is, of course, the crux of the argument.  what had not gotten itself into  
my thick skull until now was that ``once the shell has begun reading a stream,''
it has started reading and buffering the stream, so if input is not coming from
a tty or slow pipe writer, it has grabber more than the current es command, but  
probably the whole of the script.  therefore, the sharing that is nominally  
going on right now is with unpredictable data.

synopsis:  Donn's right, i'm wrong, es-0.7/input.c:424 is wrong, and the
	if (fd &gt;= 3)
test in releasefds is wrong.

fixed in 0.75

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00129" href="msg00129.html">Re: protecting shell fds</a></strong>
<ul><li><em>From:</em> John (For the colours are many, but the light is one.) Mackin &lt;john@	civil.su.oz.au&gt;</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00123.html">Re: protecting shell fds</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00125.html">Re: es 0.7: ^C at prompt</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00123.html">Re: protecting shell fds</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00129.html">Re: protecting shell fds</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00124"><strong>Date</strong></a></li>
<li><a href="threads.html#00124"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>
