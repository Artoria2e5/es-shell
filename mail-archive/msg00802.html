<!-- MHonArc v2.6.18 -->
<!--X-Subject: Object orientation in es, and a bug? -->
<!--X-From-R13: sevrqznaNtah.nv.zvg.rqh (@bnu Tevrqzna) -->
<!--X-Date: Wed, 14 Dec 1994 12:18:24 &#45;0500 -->
<!--X-Message-Id: 9412141718.AA12383@tepui -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 1994&#45;12&#45;14.132021.hanche@pride.imf.unit.no -->
<!--X-Reference: hanche@imf.unit.no -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Object orientation in es, and a bug?</title>
<link rev="made" href="mailto:friedman@gnu.ai.mit.edu">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00801.html">Date Prev</a>][<a href="msg00803.html">Date Next</a>][<a href="msg00803.html">Thread Prev</a>][<a href="msg00804.html">Thread Next</a>][<a href="maillist.html#00802">Date Index</a>][<a href="threads.html#00802">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Object orientation in es, and a bug?</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:hanche%40imf.unit.no">hanche@imf.unit.no</a></li>
<li><em>Subject</em>: Object orientation in es, and a bug?</li>
<li><em>From</em>: <a href="mailto:friedman%40gnu.ai.mit.edu">friedman@gnu.ai.mit.edu</a> (Noah Friedman)</li>
<li><em>Date</em>: Wed, 14 Dec 1994 12:18:04 -0500</li>
<li><em>Cc</em>: <a href="mailto:es%40hawkwind.utcs.toronto.edu">es@hawkwind.utcs.toronto.edu</a></li>
<li><em>In-reply-to</em>: &lt;hanche@imf.unit.no&gt; Wed, 14 December 1994 07:50:44 -0500</li>
<li><em>References</em>: &lt;<a href="msg00799.html">1994-12-14.132021.hanche@pride.imf.unit.no</a>&gt;</li>
<li><em>Reply-to</em>: <a href="mailto:friedman%40gnu.ai.mit.edu">friedman@gnu.ai.mit.edu</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Yes, it's a documented bug that closures aren't preserved across es
invocations.  That's because when a new shell starts up, it just has a
bunch of environment strings with no indication that any of the closures
they represent were shared originally.  I suggested to Paul giving each
closure a unique, numeric tag so that subshells could identify which were
shared, but I suppose neither of us has had the time to implement that.

As far as OOP in es goes, I've done a small amount myself.  The most
substantial example is my implementation of conses and a bunch of list
operations.  I don't really have any idea how much space the internal
representation takes, but the external (print) representation takes an
exponential amount of space with respect to the length of the list, which
shows up as a bunch of nested (and quoted) closures:

; require list
; list a
# result = %closure(car=a;cdr=){result @ * {result $($1)} @ s v{$s=$v}}
; list a b
# result = %closure(car=a;cdr='%closure(car=b;cdr=){result @ * {result $($1)} @ s v{$s=$v}}'){result @ * {result $($1)} @ s v{$s=$v}}
; list a b c d e f
# result = %closure(car=a;cdr='%closure(car=b;cdr=''%closure(car=c;cdr=''''%closure(car=d;cdr=''''''''%closure(car=e;cdr=''''''''''''''''%closure(car=f;cdr=){result @ * {result $($1)} @ s v{$s=$v}}''''''''''''''''){result @ * {result $($1)} @ s v{$s=$v}}''''''''){result @ * {result $($1)} @ s v{$s=$v}}''''){result @ * {result $($1)} @ s v{$s=$v}}''){result @ * {result $($1)} @ s v{$s=$v}}'){result @ * {result $($1)} @ s v{$s=$v}}
; 

I think this gives new meaning to the expression &quot;cons me harder&quot;.

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00804" href="msg00804.html">Re: Object orientation in es, and a bug?</a></strong>
<ul><li><em>From:</em> Harald Hanche-Olsen &lt;hanche@imf.unit.no&gt;</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00799" href="msg00799.html">Object orientation in es, and a bug?</a></strong>
<ul><li><em>From:</em> Harald Hanche-Olsen &lt;hanche@imf.unit.no&gt;</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00801.html">Re: Object orientation in es, and a bug?</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00803.html">Re: Object orientation in es, and a bug?</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00803.html">Re: Object orientation in es, and a bug?</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00804.html">Re: Object orientation in es, and a bug?</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00802"><strong>Date</strong></a></li>
<li><a href="threads.html#00802"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>
