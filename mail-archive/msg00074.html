<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: es %dup -->
<!--X-From-R13: Rbaa Qnir <qbaaNh.jnfuvatgba.rqh> -->
<!--X-Date: Fri, 16 Oct 1992 19:19:37 &#45;0400 -->
<!--X-Message-Id: 9210162319.AA06907@carson.u.washington.edu -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: es %dup</title>
<link rev="made" href="mailto:donn@u.washington.edu">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00073.html">Date Prev</a>][<a href="msg00075.html">Date Next</a>][<a href="msg00072.html">Thread Prev</a>][<a href="msg00084.html">Thread Next</a>][<a href="maillist.html#00074">Date Index</a>][<a href="threads.html#00074">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: es %dup</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:es%40hawkwind.utcs.toronto.edu">es@hawkwind.utcs.toronto.edu</a></li>
<li><em>Subject</em>: Re: es %dup</li>
<li><em>From</em>: Donn Cave &lt;<a href="mailto:donn%40u.washington.edu">donn@u.washington.edu</a>&gt;</li>
<li><em>Date</em>: Fri, 16 Oct 1992 19:19:30 -0400</li>
<li><em>Sender</em>: <a href="mailto:donn%40carson.u.washington.edu">donn@carson.u.washington.edu</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>|&gt; I thought you were suggesting that ``exec &lt;foo'' should
|&gt; mean  ``push foo onto input''
|
| as an aside: this functionality is avaible with the predefined function &quot;.&quot;,
| as in rc and sh.

Lots of potential confusion over what &quot;input&quot; means.  I'm just advocating
a distinction (to which heretofore all shells have been oblivious) between
command input and data input.  When the shell starts, it assigns command
input &lt;== data input (lacking a file argument), but the user should be able
to change data input, using &quot;exec&quot;, without changing the command input stream.

As Scott points out, this can be expressed as something like
        (with-open-file (*standard-input* &quot;foo&quot;)
                (my-cat)
        )
(which by itself is just saying &quot;my-cat &lt; foo&quot;), if it's done automatically
for all commands until further notice, but it's hard to see what that buys.
My feeling is that by allowing the user to manipulate fds, directly, but
protecting the internal fds by duping them out of the way when there's a
collision, you add some sanity along with a feature.

As for pushing vs. setting the fd, I think I'm talking about setting it.
I need to set 0 in the dot-file, and have it stay on that stream (the tty)
after exiting the dot-file, and under no circumstances am I interesting in
seeing unit 0 ever return to the command input stream.

|&gt; You should have direct access to
|&gt; open, close, read, write, etc.
|
| unclear.  read &amp; write are still controversial, in my mind.  open, close,
| etc. are provided, but insufficient, because you need to pick some fd
| to work on.  as Donn notes, it's probably reasonable to add something
| which returns an unused fd number that you can then use in open and
| create calls.  how about
| 	&lt;&gt;{%newfd}
| ?

Well, I thought that was your idea, but it's sure to be used.  Lots of
Bourne shell scripts do this kind of thing, and they pick some arbitrary
file descriptor and hope they're not clobbering anything.  Getting a handle
variable is a step in the right direction.  As for read and write, I'd like
to see read, but &quot;echo&quot; seems like it's already doing the write part.  I
mean, as in &quot;exec {&gt;[3] foo}; echo data &gt;[1=3]&quot;.  Read would be handy, though,
for people who don't want to carry around a C program that does the unbuffered
reading this needs.

	Donn Cave, University Computing Services, University of Washington
	donn@cac.washington.edu

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00073.html">split change</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00075.html">whatis</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00072.html">Re: es %dup</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00084.html">Re: es %dup</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00074"><strong>Date</strong></a></li>
<li><a href="threads.html#00074"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>
