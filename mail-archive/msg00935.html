<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: Plumbing -->
<!--X-From-R13: Unergu [pQnhtuna <twz11Nqczzf.pnz.np.hx> -->
<!--X-Date: Thu, 20 Mar 1997 17:11:24 &#45;0500 -->
<!--X-Message-Id: E0w7g47&#45;0000Ov&#45;00@g.pet.cam.ac.uk -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 199703200813.IAA08447@phantom.cegelecproj.co.uk -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Plumbing</title>
<link rev="made" href="mailto:gjm11@dpmms.cam.ac.uk">
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00934.html">Date Prev</a>][<a href="msg00936.html">Date Next</a>][<a href="msg00934.html">Thread Prev</a>][<a href="msg00936.html">Thread Next</a>][<a href="maillist.html#00935">Date Index</a>][<a href="threads.html#00935">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: Plumbing</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:es%40hawkwind.utcs.toronto.edu">es@hawkwind.utcs.toronto.edu</a></li>
<li><em>Subject</em>: Re: Plumbing</li>
<li><em>From</em>: Gareth McCaughan &lt;<a href="mailto:gjm11%40dpmms.cam.ac.uk">gjm11@dpmms.cam.ac.uk</a>&gt;</li>
<li><em>Date</em>: Thu, 20 Mar 1997 06:31:22 -0500</li>
<li><em>In-reply-to</em>: Your message of &quot;Thu, 20 Mar 1997 08:13:22 GMT.&quot;             &lt;<a href="msg00934.html">199703200813.IAA08447@phantom.cegelecproj.co.uk</a>&gt; </li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>In response to my suggestion of a multipipe primitive for es,
Steve Kilbane wrote:

&gt; &gt; It would be useful to be able to distinguish between
&gt; &gt; the two kinds of output; but you don't just want to send them
&gt; &gt; to different places, because you want to keep the two
&gt; &gt; synchronised.
&gt; 
&gt; Bzzt! You're onto something of a loser here already, because
&gt; once the output from the fds enters the realm of pipes, you're
&gt; into buffering issues, and you lose the synchronisation.

*click* You're absolutely right, of course. On the other hand,
you keep *some* synchronisation (i.e., two bits of output emitted
at the same time are likely to arrive at about the same time);
it might or might not be enough for practical purposes. I'm not
very clued up on the implementation details; would someone more
expert than I am like to comment here?

and also:

&gt; If you really want to go with this, I'd suggest dropping elegance and
&gt; going for practicality. Perl's IPC::Open3 module will give the
&gt; functionality you require, and Perl is always great for those one-off
&gt; jobs that aren't worth breaking out the C compiler for...

That sounds like a good idea. I hadn't known about Open3, but it
looks like it will do what I want without too much pain. Thanks!


Paul Haahr, on the other hand, wrote in response to my suggestion
for the syntax of the extended %pipe this would require:

&gt; &gt;     %pipe {make universe} '1 2' '0 3' {process_output}
...
&gt; (Er, ugh.)  If I were to do such a thing, I'd probably change the pipe
&gt; primitive to take a list of output-on-left/input-on-right fd pairs,
&gt; either counted or explicitly delimited, something like
&gt; 
&gt;   make universe |[1=0,2=3] process_output | grep errors
&gt; 
&gt; turning into
&gt; 
&gt;   %pipe {make universe} 1 0 2 3 . {process_output} 1 0 . {grep errors}

The reason for my proposed syntax was that it would be backward-compatible
with the existing %pipe syntax. Isn't this relevant?

&gt; But if we did this, then people would start to want things like circular
&gt; pipes, just for the sake of completeness, and the notations get really
&gt; absurd.

Well, you don't have to follow every idea to its illogical conclusion :-)

&gt; Not crazy.  It's just that the number of times it actually would be used
&gt; is probably pretty rare.

I would use it every time I do a &quot;make&quot;. (Following the suggestion
of Perl5's Open3 module, I'll probably actually use that instead.)

&gt; Is there any chance of a future release of es seeing the light of day?

;-)

&gt; If you implement it, release it as a patch and see if other es users
&gt; find it useful.

Given that Perl will do the plumbing I need, I'll probably just use
that. But if anyone else on this list thinks the multipipe hack
would be useful, I might do it after all.

-- 
Gareth McCaughan       Dept. of Pure Mathematics &amp; Mathematical Statistics,
gjm11@dpmms.cam.ac.uk  Cambridge University, England.

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00934" href="msg00934.html">Re: Plumbing</a></strong>
<ul><li><em>From:</em> Steve_Kilbane@cegelecproj.co.uk</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00934.html">Re: Plumbing</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00936.html">Re: Plumbing</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00934.html">Re: Plumbing</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00936.html">Re: Plumbing</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00935"><strong>Date</strong></a></li>
<li><a href="threads.html#00935"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>
